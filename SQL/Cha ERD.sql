
DROP TABLE PAYMENT;
DROP TABLE RECOMMEND;
DROP TABLE REVIEW;
DROP TABLE RESERVATION;
DROP TABLE INSURANCE;
DROP TABLE RATING;
DROP TABLE VEHICLE;
DROP TABLE LOCATION;
DROP TABLE FUELTYPE;
DROP TABLE CARTYPE;
DROP TABLE REPORT;
DROP TABLE COUPON;
DROP TABLE MEMBER_INFO;
DROP TABLE MEMBER;
DROP TABLE NOTICE;
DROP TABLE COUPON_MANAGE;
DROP TABLE INQUIRY;

CREATE TABLE INQUIRY (
       IDX NUMBER CONSTRAINT INQUIRY_IDX_PK PRIMARY KEY NOT NULL
     , TITLE VARCHAR2(100) NOT NULL 
     , CONTENT CLOB NOT NULL
);

DROP SEQUENCE INQUIRY_SEQ;
CREATE SEQUENCE INQUIRY_SEQ;

INSERT INTO INQUIRY VALUES(INQUIRY_SEQ.NEXTVAL, '자주 묻는 질문 제목 1', '자주 묻는 질문 내용 테스트 1');
INSERT INTO INQUIRY VALUES(INQUIRY_SEQ.NEXTVAL, '자주 묻는 질문 제목 2', '자주 묻는 질문 내용 테스트 2');
INSERT INTO INQUIRY VALUES(INQUIRY_SEQ.NEXTVAL, '자주 묻는 질문 제목 3', '자주 묻는 질문 내용 테스트 3');
INSERT INTO INQUIRY VALUES(INQUIRY_SEQ.NEXTVAL, '자주 묻는 질문 제목 4', '자주 묻는 질문 내용 테스트 4');
INSERT INTO INQUIRY VALUES(INQUIRY_SEQ.NEXTVAL, '자주 묻는 질문 제목 5', '자주 묻는 질문 내용 테스트 5');

CREATE TABLE COUPON_MANAGE (
       IDX NUMBER CONSTRAINT COUPON_MANAGE_IDX_PK PRIMARY KEY NOT NULL 
     , RATE NUMBER NOT NULL 
     , PEROID NUMBER NOT NULL 
     , NAME VARCHAR2(30) NOT NULL
);

DROP SEQUENCE COUPON_MANAGE_SEQ;
CREATE SEQUENCE COUPON_MANAGE_SEQ;

INSERT INTO COUPON_MANAGE VALUES(COUPON_MANAGE_SEQ.NEXTVAL, 0.15, 10, '쿠폰 테스트 1');
INSERT INTO COUPON_MANAGE VALUES(COUPON_MANAGE_SEQ.NEXTVAL, 0.20, 14, '쿠폰 테스트 2');
INSERT INTO COUPON_MANAGE VALUES(COUPON_MANAGE_SEQ.NEXTVAL, 0.10, 5, '쿠폰 테스트 3');
INSERT INTO COUPON_MANAGE VALUES(COUPON_MANAGE_SEQ.NEXTVAL, 0.30, 7, '쿠폰 테스트 4');
INSERT INTO COUPON_MANAGE VALUES(COUPON_MANAGE_SEQ.NEXTVAL, 0.05, 12, '쿠폰 테스트 5');

CREATE TABLE NOTICE (
       IDX NUMBER CONSTRAINT NOTICE_IDX_PK PRIMARY KEY NOT NULL 
     , TITLE VARCHAR2(100) NOT NULL 
     , CONTENT CLOB NOT NULL 
     , CREATE_DATE DATE DEFAULT SYSTIMESTAMP NOT NULL
     , READ_COUNT NUMBER DEFAULT 0 NOT NULL
     , UPDATE_DATE DATE DEFAULT NULL
     , DELETE_DATE DATE DEFAULT NULL
);

DROP SEQUENCE NOTICE_SEQ;
CREATE SEQUENCE NOTICE_SEQ;

INSERT INTO NOTICE VALUES(NOTICE_SEQ.NEXTVAL, '공지사항 테스트 1', '공지사항 내용 테스트입니다 1', DEFAULT, DEFAULT, DEFAULT, DEFAULT);
INSERT INTO NOTICE VALUES(NOTICE_SEQ.NEXTVAL, '공지사항 테스트 2', '공지사항 내용 테스트입니다 2', DEFAULT, DEFAULT, DEFAULT, DEFAULT);
INSERT INTO NOTICE VALUES(NOTICE_SEQ.NEXTVAL, '공지사항 테스트 3', '공지사항 내용 테스트입니다 3', DEFAULT, DEFAULT, DEFAULT, DEFAULT);
INSERT INTO NOTICE VALUES(NOTICE_SEQ.NEXTVAL, '공지사항 테스트 4', '공지사항 내용 테스트입니다 4', DEFAULT, DEFAULT, DEFAULT, DEFAULT);
INSERT INTO NOTICE VALUES(NOTICE_SEQ.NEXTVAL, '공지사항 테스트 5', '공지사항 내용 테스트입니다 5', DEFAULT, DEFAULT, DEFAULT, DEFAULT);


CREATE TABLE MEMBER (
       IDX NUMBER CONSTRAINT MEMBER_IDX_PK PRIMARY KEY NOT NULL 
     , USERNAME VARCHAR2(20) NOT NULL 
     , PASSWORD VARCHAR2(30) NOT NULL 
     , ENABLED NUMBER DEFAULT 1 CONSTRAINT MEMBER_ENABLED_CK CHECK (ENABLED IN (0, 1)) NOT NULL
     , AUTH VARCHAR2(50) DEFAULT 'ROLE_USER' NOT NULL
);

DROP SEQUENCE MEMBER_SEQ;
CREATE SEQUENCE MEMBER_SEQ;

INSERT INTO MEMBER VALUES(MEMBER_SEQ.NEXTVAL, 'admin', '{noop}admin', DEFAULT, 'ROLE_ADMIN');
INSERT INTO MEMBER VALUES(MEMBER_SEQ.NEXTVAL, 'manager', '{noop}manager', DEFAULT, 'ROLE_MANAGER');
INSERT INTO MEMBER VALUES(MEMBER_SEQ.NEXTVAL, 'user11', '{noop}user11', DEFAULT, DEFAULT);
INSERT INTO MEMBER VALUES(MEMBER_SEQ.NEXTVAL, 'user22', '{noop}user22', DEFAULT, DEFAULT);
INSERT INTO MEMBER VALUES(MEMBER_SEQ.NEXTVAL, 'user33', '{noop}user33', DEFAULT, DEFAULT);
INSERT INTO MEMBER VALUES(MEMBER_SEQ.NEXTVAL, 'user44', '{noop}user44', DEFAULT, DEFAULT);
INSERT INTO MEMBER VALUES(MEMBER_SEQ.NEXTVAL, 'user55', '{noop}user55', DEFAULT, DEFAULT);

CREATE TABLE MEMBER_INFO (
       IDX NUMBER CONSTRAINT MEMBER_INFO_IDX_FK REFERENCES MEMBER(IDX) NOT NULL
     , NAME VARCHAR2(30) NOT NULL 
     , GENDER NUMBER NOT NULL
     , BIRTH VARCHAR2(10) NOT NULL 
     , PHONE_NUMBER VARCHAR2(20)
     , LICENSE VARCHAR2(20) NOT NULL 
     , EMAIL VARCHAR2(50) NOT NULL
);

DROP SEQUENCE MEMBER_INFO_SEQ;
CREATE SEQUENCE MEMBER_INFO_SEQ;

/* 관리자랑 매니저 정보는 어떻게 저장할 것인가?*/
INSERT INTO MEMBER_INFO VALUES(MEMBER_INFO_SEQ.NEXTVAL, '관리자', 0, '관리자임', '관리자임', '관리자임', 'admin@test.or.kr');
INSERT INTO MEMBER_INFO VALUES(MEMBER_INFO_SEQ.NEXTVAL, '매니저', 1, '관리자임', '관리자임', '매니저임', 'manager@test.or.kr');
INSERT INTO MEMBER_INFO VALUES(MEMBER_INFO_SEQ.NEXTVAL, '유저1', 0, '19930219', '01012345678', '111307273809', 'user11@test.or.kr');
INSERT INTO MEMBER_INFO VALUES(MEMBER_INFO_SEQ.NEXTVAL, '유저2', 1, '19880711', '01023435456', '171228374911', 'user22@test.or.kr');
INSERT INTO MEMBER_INFO VALUES(MEMBER_INFO_SEQ.NEXTVAL, '유저3', 0, '20001110', '01012477765', '222038927880', 'user33@test.or.kr');
INSERT INTO MEMBER_INFO VALUES(MEMBER_INFO_SEQ.NEXTVAL, '유저4', 1, '19771203', '01068644323', '131011234271', 'user44@test.or.kr');
INSERT INTO MEMBER_INFO VALUES(MEMBER_INFO_SEQ.NEXTVAL, '유저5', 0, '20010107', '01068992143', '282187263862', 'user55@test.or.kr');

CREATE TABLE COUPON (
       IDX NUMBER CONSTRAINT COUPON_IDX_PK PRIMARY KEY NOT NULL 
     , START_DATE DATE NOT NULL 
     , EXPIRE_DATE DATE NOT NULL 
     , COUPON_IDX NUMBER CONSTRAINT COUPON_IDX_FK REFERENCES COUPON_MANAGE(IDX) NOT NULL
     , MEMBER_IDX NUMBER CONSTRAINT COUPON_MEMBER_FK REFERENCES MEMBER(IDX) NOT NULL
);

DROP SEQUENCE COUPON_SEQ;
CREATE SEQUENCE COUPON_SEQ;

INSERT INTO COUPON VALUES(COUPON_SEQ.NEXTVAL,);
INSERT INTO COUPON VALUES(COUPON_SEQ.NEXTVAL,);
INSERT INTO COUPON VALUES(COUPON_SEQ.NEXTVAL,);
INSERT INTO COUPON VALUES(COUPON_SEQ.NEXTVAL,);
INSERT INTO COUPON VALUES(COUPON_SEQ.NEXTVAL,);

CREATE TABLE REPORT (
       IDX NUMBER CONSTRAINT REPORT_IDX_PK PRIMARY KEY NOT NULL 
     , REVIEW_IDX NUMBER NOT NULL 
     , MEMBER_IDX NUMBER CONSTRAINT REPORT_MEMBER_FK REFERENCES MEMBER(IDX) NOT NULL
);

DROP SEQUENCE INQUIRY_SEQ;
CREATE SEQUENCE INQUIRY_SEQ;

INSERT INTO INQUIRY VALUES(INQUIRY_SEQ.NEXTVAL, '자주 묻는 질문 제목 1', '자주 묻는 질문 내용 테스트 1');

CREATE TABLE CARTYPE (
       IDX NUMBER CONSTRAINT CARTYPE_IDX_PK PRIMARY KEY NOT NULL 
     , TYPE NUMBER NOT NULL
);

DROP SEQUENCE INQUIRY_SEQ;
CREATE SEQUENCE INQUIRY_SEQ;

INSERT INTO INQUIRY VALUES(INQUIRY_SEQ.NEXTVAL, '자주 묻는 질문 제목 1', '자주 묻는 질문 내용 테스트 1');

CREATE TABLE FUELTYPE (
       IDX NUMBER CONSTRAINT FUELTYPE_IDX_PK PRIMARY KEY NOT NULL 
     , TYPE VARCHAR2(20) NOT NULL
);

DROP SEQUENCE INQUIRY_SEQ;
CREATE SEQUENCE INQUIRY_SEQ;

INSERT INTO INQUIRY VALUES(INQUIRY_SEQ.NEXTVAL, '자주 묻는 질문 제목 1', '자주 묻는 질문 내용 테스트 1');

CREATE TABLE LOCATION (
       IDX NUMBER CONSTRAINT LOCATION_IDX_PK PRIMARY KEY NOT NULL 
     , NAME VARCHAR2 (30) NOT NULL 
     , LATITUDE NUMBER NOT NULL 
     , LONGITUDE NUMBER NOT NULL 
     , PHONE_NUMBER VARCHAR2(15) NOT NULL 
     , BUSINESS_HOURS VARCHAR2(15) NOT NULL 
     , ADDRESS VARCHAR2(100) NOT NULL
);

DROP SEQUENCE INQUIRY_SEQ;
CREATE SEQUENCE INQUIRY_SEQ;

INSERT INTO INQUIRY VALUES(INQUIRY_SEQ.NEXTVAL, '자주 묻는 질문 제목 1', '자주 묻는 질문 내용 테스트 1');

CREATE TABLE VEHICLE (
       IDX NUMBER CONSTRAINT VEHICLE_IDX_PK PRIMARY KEY NOT NULL 
     , MODEL VARCHAR2(50) NOT NULL 
     , YEAR NUMBER NOT NULL 
     , PRICE NUMBER NOT NULL 
     , IMAGE VARCHAR2(300) NOT NULL 
     , MAKER VARCHAR2(20) NOT NULL 
     , LOCATION_IDX NUMBER CONSTRAINT VEHICLE_LOCATION_FK REFERENCES LOCATION(IDX) NOT NULL
     , FUELTYPE_IDX NUMBER CONSTRAINT VEHICLE_FUELTYPE_FK REFERENCES FUELTYPE(IDX) NOT NULL
     , CARTYPE_IDX NUMBER CONSTRAINT VEHICLE_CARTYPE_FK REFERENCES CARTYPE(IDX) NOT NULL
);

DROP SEQUENCE INQUIRY_SEQ;
CREATE SEQUENCE INQUIRY_SEQ;

INSERT INTO INQUIRY VALUES(INQUIRY_SEQ.NEXTVAL, '자주 묻는 질문 제목 1', '자주 묻는 질문 내용 테스트 1');

CREATE TABLE RATING (
       RATING_AVG NUMBER NOT NULL 
     , VEHICLE_IDX NUMBER CONSTRAINT RATING_VEHICLE_FK REFERENCES VEHICLE(IDX) NOT NULL 
);

DROP SEQUENCE INQUIRY_SEQ;
CREATE SEQUENCE INQUIRY_SEQ;

INSERT INTO INQUIRY VALUES(INQUIRY_SEQ.NEXTVAL, '자주 묻는 질문 제목 1', '자주 묻는 질문 내용 테스트 1');

CREATE TABLE INSURANCE (
       IDX NUMBER CONSTRAINT INSURANCE_IDX_PK PRIMARY KEY NOT NULL 
     , NAME VARCHAR2(30) NOT NULL 
     , PRICE NUMBER NOT NULL
);

DROP SEQUENCE INQUIRY_SEQ;
CREATE SEQUENCE INQUIRY_SEQ;

INSERT INTO INQUIRY VALUES(INQUIRY_SEQ.NEXTVAL, '자주 묻는 질문 제목 1', '자주 묻는 질문 내용 테스트 1');

CREATE TABLE RESERVATION (
       IDX NUMBER CONSTRAINT RESERVATION_IDX_PK PRIMARY KEY NOT NULL 
     , RESERV_START DATE DEFAULT SYSTIMESTAMP NOT NULL
     , RESERV_END DATE NOT NULL
     , RESERV_STATE NUMBER DEFAULT 1 CONSTRAINT RESERVATION_STATE_CK CHECK(RESERV_STATE IN (0, 1, 2)) NOT NULL
     , IS_MEMBER NUMBER DEFAULT 1 CONSTRAINT RESERVATION_IS_MEMBER_CK CHECK(IS_MEMBER IN (0, 1)) NOT NULL
     , INSURANCE_IDX NUMBER CONSTRAINT RESERVATION_INSURANCE_FK REFERENCES INSURANCE(IDX) NOT NULL
     , VEHICLE_IDX NUMBER CONSTRAINT RESERVATION_VEHICLE_FK REFERENCES VEHICLE(IDX) NOT NULL 
     , MEMBER_IDX NUMBER CONSTRAINT RESERVATION_MEMBER_FK REFERENCES MEMBER(IDX) NOT NULL
     , RENT_LOCATION NUMBER CONSTRAINT RESERVATION_RENT_LOCATION_FK REFERENCES LOCATION(IDX) NOT NULL
     , RETURN_LOCATION NUMBER CONSTRAINT RESERVATION_RETURN_LOCATION_FK REFERENCES LOCATION(IDX) NOT NULL
);

DROP SEQUENCE INQUIRY_SEQ;
CREATE SEQUENCE INQUIRY_SEQ;

INSERT INTO INQUIRY VALUES(INQUIRY_SEQ.NEXTVAL, '자주 묻는 질문 제목 1', '자주 묻는 질문 내용 테스트 1');

CREATE TABLE REVIEW (
       IDX NUMBER CONSTRAINT REVIEW_IDX_PK PRIMARY KEY NOT NULL 
     , CONTENT VARCHAR2(300) NOT NULL 
     , CREATE_DATE TIMESTAMP DEFAULT SYSTIMESTAMP NOT NULL 
     , RECOMMEND NUMBER NOT NULL 
     , SCORE NUMBER(5, 3) NOT NULL 
     , VEHICLE_IDX NUMBER CONSTRAINT REVIEW_VEHICLE_FK REFERENCES VEHICLE(IDX) NOT NULL
);

DROP SEQUENCE INQUIRY_SEQ;
CREATE SEQUENCE INQUIRY_SEQ;

INSERT INTO INQUIRY VALUES(INQUIRY_SEQ.NEXTVAL, '자주 묻는 질문 제목 1', '자주 묻는 질문 내용 테스트 1');

CREATE TABLE RECOMMEND (
       IDX NUMBER CONSTRAINT RECOMMEND_IDX_PK PRIMARY KEY NOT NULL 
     , REVIEW_IDX NUMBER CONSTRAINT RECOMMEND_REVIEW_FK REFERENCES REVIEW(IDX) NOT NULL 
     , MEMBER_IDX NUMBER CONSTRAINT RECOMMEND_MEMBER_FK REFERENCES MEMBER(IDX) NOT NULL
);

DROP SEQUENCE INQUIRY_SEQ;
CREATE SEQUENCE INQUIRY_SEQ;

INSERT INTO INQUIRY VALUES(INQUIRY_SEQ.NEXTVAL, '자주 묻는 질문 제목 1', '자주 묻는 질문 내용 테스트 1');

CREATE TABLE PAYMENT (
       PAY_CODE NUMBER CONSTRAINT PAYMENT_IDX_PK PRIMARY KEY NOT NULL 
     , PAY_DATE DATE DEFAULT SYSTIMESTAMP NOT NULL 
     , PAY_METHOD VARCHAR2(15) NOT NULL 
     , RESERV_IDX NUMBER CONSTRAINT PAYMENT_RESERVATION_FK REFERENCES RESERVATION(IDX) NOT NULL 
     , RESERV_CANCEL NUMBER DEFAULT 0 CONSTRAINT PAYMENT_RESERV_CANCEL_CK CHECK(RESERV_CANCEL IN(0, 1)) NOT NULL
     , CANCEL_DATE DATE DEFAULT NULL 
);

DROP SEQUENCE INQUIRY_SEQ;
CREATE SEQUENCE INQUIRY_SEQ;

INSERT INTO INQUIRY VALUES(INQUIRY_SEQ.NEXTVAL, '자주 묻는 질문 제목 1', '자주 묻는 질문 내용 테스트 1');